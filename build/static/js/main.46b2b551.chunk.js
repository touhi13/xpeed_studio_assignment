(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(50)},48:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(24),o=n.n(r),i=n(13),l=n(4),m=n(2),p=n(14),d=n.n(p),u=n(53),s=n(3),h=n.n(s),g="row",b="column",y=[{id:h.a.generate(),type:"sidebarItem",component:{type:"input",content:"Some input"}},{id:h.a.generate(),type:"sidebarItem",component:{type:"name",content:"Some name"}},{id:h.a.generate(),type:"sidebarItem",component:{type:"email",content:"Some email"}},{id:h.a.generate(),type:"sidebarItem",component:{type:"phone",content:"Some phone"}},{id:h.a.generate(),type:"sidebarItem",component:{type:"image",content:"Some image"}},{id:h.a.generate(),type:"sidebarItem",component:{type:"row",content:"Some row"}},{id:h.a.generate(),type:"sidebarItem",component:{type:"column",content:"Some column"}}],f=["sidebarItem","component",g,b],v=function(e){var t=e.data,n=e.onDrop,a=e.isLast,r=e.className,o=Object(u.a)({accept:f,drop:function(e,a){n(t,e)},canDrop:function(e,n){var a=t.path,c=a.split("-"),r=e.path;if(!r)return!0;var o=r.split("-");if(c[0]!==o[0]&&2===c.length&&t.childrenCount>=3)return!1;if(o.length<c.length)return!1;if(r===a)return!1;if(o.length===c.length){var i=o.slice(0,-1).join("-"),l=Number(o.slice(-1)[0]),m=c.slice(0,-1).join("-"),p=Number(c.slice(-1)[0]);if(i===m&&l+1===p)return!1}return!0},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),i=Object(m.a)(o,2),l=i[0],p=l.isOver,s=l.canDrop,h=i[1],g=p&&s;return c.a.createElement("div",{className:d()("dropZone",{active:g,isLast:a},r),ref:h})},O=[g,b,"component"],j=function(e){var t=e.data,n=e.onDrop,a=Object(u.a)({accept:O,drop:function(e,a){n(t,e)},canDrop:function(e,n){var a=t.layout,c=e.path.split("-")[0],r=a[c]&&a[c].children.length;return!(e.type===b&&r&&r<2)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),r=Object(m.a)(a,2),o=r[0],i=o.isOver,l=o.canDrop,p=r[1],s=i&&l;return c.a.createElement("div",{className:d()("trashDropZone",{active:s}),ref:p},"TRASH")},E=n(54),D=function(e){var t=e.data,n=Object(E.a)({item:t,collect:function(e){return{opacity:e.isDragging()?.4:1}}}),a=Object(m.a)(n,2),r=a[0].opacity,o=a[1];return c.a.createElement("div",{className:"sideBarItem",ref:o,style:{opacity:r}},t.component.type)},N=function(e){var t=e.setIsOpen,n=e.itemId;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"overlay"}),c.a.createElement("div",{className:"modal"},c.a.createElement("header",{className:"modal__header"},c.a.createElement("h2",null,"Item Id"),c.a.createElement("button",{onClick:function(){t(!1)},className:"close-button"},"\xd7")),c.a.createElement("main",{className:"modal__main"},c.a.createElement("p",null,n))))},w={border:"1px dashed black",padding:"0.5rem 1rem",backgroundColor:"white",cursor:"move"},k=function(e){var t=e.data,n=e.components,r=e.path,o=Object(a.useRef)(null),i=Object(E.a)({item:{type:"component",id:t.id,path:r},collect:function(e){return{isDragging:e.isDragging()}}}),p=Object(m.a)(i,2),d=p[0].isDragging?0:1;(0,p[1])(o);var u=n[t.id],s=Object(a.useState)(!1),h=Object(m.a)(s,2),g=h[0],b=h[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{ref:o,style:Object(l.a)({},w,{opacity:d}),className:"component draggable",onClick:function(){b(!0)}},c.a.createElement("div",null,t.id),c.a.createElement("div",null,u.content)),g&&c.a.createElement(N,{setIsOpen:b,itemId:t.id}))},S={},I=function(e){var t=e.data,n=e.components,r=e.handleDrop,o=e.path,i=Object(a.useRef)(null),p=Object(E.a)({item:{type:b,id:t.id,children:t.children,path:o},collect:function(e){return{isDragging:e.isDragging()}}}),d=Object(m.a)(p,2),u=d[0].isDragging?0:1;(0,d[1])(i);return"row"!==t.componentType?c.a.createElement("div",{ref:i,style:Object(l.a)({},S,{opacity:u}),className:"base draggable column"},"column"!==t.componentType?t.id:"new column ".concat(t.id),"column"!==t.componentType&&t.children.map(function(e,a){var i="".concat(o,"-").concat(a);return c.a.createElement(c.a.Fragment,{key:e.id},c.a.createElement(v,{data:{path:i,childrenCount:t.children.length},onDrop:r}),"column"!==t.componentType&&function(e,t){return c.a.createElement(k,{key:e.id,data:e,components:n,path:t})}(e,i))}),c.a.createElement(v,{data:{path:"".concat(o,"-").concat(t.children.length),childrenCount:t.children.length},onDrop:r,isLast:!0})):c.a.createElement(c.a.Fragment,null)},C=n(26),T={},F=function(e){var t=e.data,n=e.components,r=e.handleDrop,o=e.path,i=Object(a.useRef)(null),p=Object(E.a)({item:{type:g,id:t.id,children:t.children,path:o},collect:function(e){return{isDragging:e.isDragging()}}}),d=Object(m.a)(p,2),u=d[0].isDragging?0:1;(0,d[1])(i);return c.a.createElement("div",{ref:i,style:Object(l.a)({},T,{opacity:u}),className:"base draggable row"},"row"!==t.componentType?t.id:"new row ".concat(t.id),c.a.createElement("div",{className:"columns"},t.children.map(function(e,a){var i="".concat(o,"-").concat(a);return c.a.createElement(c.a.Fragment,{key:e.id},c.a.createElement(v,{data:{path:i,childrenCount:t.children.length},onDrop:r,className:"horizontalDrag"}),"row"!==t.componentType&&function(e,t){return c.a.createElement(C.Resizable,{enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1}},c.a.createElement(I,{key:e.id,data:e,components:n,handleDrop:r,path:t}))}(e,i))}),c.a.createElement(v,{data:{path:"".concat(o,"-").concat(t.children.length),childrenCount:t.children.length},onDrop:r,className:"horizontalDrag",isLast:!0})))},L={layout:[{type:g,id:"row0",children:[{type:b,id:"column0",children:[{type:"component",id:"component0"},{type:"component",id:"component1"}]},{type:b,id:"column1",children:[{type:"component",id:"component2"}]}]},{type:g,id:"row1",children:[{type:b,id:"column2",children:[{type:"component",id:"component3"},{type:"component",id:"component0"},{type:"component",id:"component2"}]}]}],components:{component0:{id:"component0",type:"input",content:"Some input"},component1:{id:"component1",type:"image",content:"Some image"},component2:{id:"component2",type:"email",content:"Some email"},component3:{id:"component3",type:"name",content:"Some name"},component4:{id:"component4",type:"phone",content:"Some phone"}}},R=n(6),_=function e(t,n,a){if(1===n.length){var c=Number(n[0]);return function(e,t,n){var a=Array.from(e),c=a.splice(t,1),r=Object(m.a)(c,1)[0];return a.splice(n,0,r),a}(t,Number(a[0]),c)}var r=Object(R.a)(t),o=Number(n.slice(0,1)),i=n.slice(1),p=a.slice(1),d=r[o];return r[o]=Object(l.a)({},d,{children:e(d.children,i,p)}),r},x=function e(t,n){if(1===n.length){var a=Number(n[0]);return c=t,r=a,[].concat(Object(R.a)(c.slice(0,r)),Object(R.a)(c.slice(r+1)))}var c,r,o=Object(R.a)(t),i=Number(n.slice(0,1)),m=n.slice(1),p=o[i];return o[i]=Object(l.a)({},p,{children:e(p.children,m)}),o},z=function e(t,n,a){if(1===n.length){var c=Number(n[0]);return r=t,o=c,i=a,[].concat(Object(R.a)(r.slice(0,o)),[i],Object(R.a)(r.slice(o)))}var r,o,i,m=Object(R.a)(t),p=Number(n.slice(0,1)),d=n.slice(1),u=m[p];return m[p]=Object(l.a)({},u,{children:e(u.children,d,a)}),m},A=function(e,t,n,a){var c,r={type:b,id:h.a.generate(),children:[a]},o={type:g,id:h.a.generate()};switch(t.length){case 1:c=a.type===b?Object(l.a)({},o,{children:[a]}):Object(l.a)({},o,{children:[r]});break;case 2:c="component"===a.type?r:a;break;default:c=a}var i=e;return i=function(e){var t=Object(R.a)(e),n={type:b,id:h.a.generate(),children:[]};return t.map(function(e){return e.children.length||(e.children=[n]),e})}(i=x(i,n)),i=z(i,t,c)},B=function(e){var t=e.layout,n=(e.components,Object(a.useState)({})),r=Object(m.a)(n,2),o=r[0],i=r[1];return Object(a.useEffect)(function(){var e={layout:t},n=JSON.stringify(e,void 0,2);i(n)}),c.a.createElement("div",null,c.a.createElement("h4",null,"Full Object Data:"),c.a.createElement("textarea",{defaultValue:o,name:"",id:"",cols:"100",rows:"50"}))},J=function(){var e=L.layout,t=L.components,n=Object(a.useState)(e),r=Object(m.a)(n,2),o=r[0],p=r[1],d=Object(a.useState)(t),u=Object(m.a)(d,2),s=u[0],f=u[1],O=Object(a.useState)(!0),E=Object(m.a)(O,2),N=(E[0],E[1],Object(a.useCallback)(function(e,t){var n=t.path.split("-");p(function(e,t){return x(e,t)}(o,n))},[o])),w=Object(a.useCallback)(function(e,t){var n=e.path.split("-"),a=n.slice(0,-1).join("-"),c={id:t.id,type:t.type};if(t.type===b&&(c.children=t.children),"sidebarItem"===t.type){var r=Object(l.a)({id:h.a.generate()},t.component),m={id:r.id,type:"component",componentType:r.type};return f(Object(l.a)({},s,Object(i.a)({},r.id,r))),void p(function(e,t,n){var a;switch(t.length){case 1:a={type:g,id:h.a.generate(),children:[{type:b,id:h.a.generate(),children:[n]}],componentType:n.componentType};break;case 2:a={type:b,id:h.a.generate(),children:[n],componentType:n.componentType};break;default:a=n}return z(e,t,a)}(o,n,m))}var d=t.path.split("-"),u=d.slice(0,-1).join("-");if(d.length===n.length)return u===a?void p(function(e,t,n){return _(e,t,n)}(o,n,d)):void p(A(o,n,d,c));p(A(o,n,d,c))},[o,s]);return c.a.createElement("div",{className:"body"},c.a.createElement("div",{className:"sideBar"},Object.values(y).map(function(e,t){return c.a.createElement(D,{key:e.id,data:e})})),c.a.createElement("div",{className:"pageContainer"},c.a.createElement("div",{className:"page"},o.map(function(e,t){var n="".concat(t);return c.a.createElement(c.a.Fragment,{key:e.id},c.a.createElement(v,{data:{path:n,childrenCount:o.length},onDrop:w,path:n}),"column"!==e.componentType&&function(e,t){return c.a.createElement(F,{key:e.id,data:e,handleDrop:w,components:s,path:t})}(e,n))}),c.a.createElement(v,{data:{path:"".concat(o.length),childrenCount:o.length},onDrop:w,isLast:!0})),c.a.createElement(j,{data:{layout:o},onDrop:N}),function(e,t){return c.a.createElement(B,{layout:e,components:t})}(o,s)))},Z=n(52),H=n(27);n(48);function V(){return c.a.createElement("div",{className:"App"},c.a.createElement(Z.a,{backend:H.a},c.a.createElement(J,null)))}var q=document.getElementById("root");o.a.render(c.a.createElement(V,null),q)}},[[29,2,1]]]);
//# sourceMappingURL=main.46b2b551.chunk.js.map